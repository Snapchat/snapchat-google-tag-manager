___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "categories": ["ADVERTISING", "ANALYTICS", "ATTRIBUTION", "CONVERSIONS", "MARKETING"],
  "displayName": "Snap Pixel",
  "description": "The Snap Pixel helps advertisers measure the cross-device impact of campaigns. Advertisers will be able to see how many Snapchatters take action on their website(s).",
  "securityGroups": [
    "NON_GOOGLE_SCRIPTS"
  ],
  "id": "snppx",
  "type": "TAG",
  "version": 1,
  "brand": {
    "thumbnail": "data:image/png;base64,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\u003d\u003d",
    "displayName": "Snap Pixel Template",
    "id": "brand_snap"
  },
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "hiddenParamValue": {
      "type": "URL"
    },
    "name": "page_url",
    "type": "HIDDEN"
  },
  {
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      },
      {
        "args": [
          "[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}"
        ],
        "type": "REGEX"
      }
    ],
    "displayName": "Pixel ID",
    "name": "pixel_id",
    "type": "TEXT"
  },
  {
    "macrosInSelect": true,
    "selectItems": [
      {
        "displayValue": "Page View",
        "value": "PAGE_VIEW"
      },
      {
        "displayValue": "Add Cart",
        "value": "ADD_CART"
      },
      {
        "displayValue": "Save",
        "value": "SAVE"
      },
      {
        "displayValue": "Purchase",
        "value": "PURCHASE"
      },
      {
        "displayValue": "Level Complete",
        "value": "LEVEL_COMPLETE"
      },
      {
        "displayValue": "Start Checkout",
        "value": "START_CHECKOUT"
      },
      {
        "displayValue": "Sign Up",
        "value": "SIGN_UP"
      },
      {
        "displayValue": "App Install",
        "value": "APP_INSTALL"
      },
      {
        "displayValue": "App Open",
        "value": "APP_OPEN"
      },
      {
        "displayValue": "Add Billing",
        "value": "ADD_BILLING"
      },
      {
        "displayValue": "Search",
        "value": "SEARCH"
      },
      {
        "value": "VIEW_CONTENT",
        "displayValue": "View Content"
      },
      {
        "value": "SUBSCRIBE",
        "displayValue": "Subscribe"
      },
      {
        "value": "AD_CLICK",
        "displayValue": "Ad Click"
      },
      {
        "value": "AD_VIEW",
        "displayValue": "Ad View"
      },
      {
        "value": "COMPLETE_TUTORIAL",
        "displayValue": "Complete Tutorial"
      },
      {
        "value": "INVITE",
        "displayValue": "Invite"
      },
      {
        "value": "LOGIN",
        "displayValue": "Login"
      },
      {
        "value": "SHARE",
        "displayValue": "Share"
      },
      {
        "value": "RESERVE",
        "displayValue": "Reserve"
      },
      {
        "value": "ACHIEVEMENT_UNLOCKED",
        "displayValue": "Achievement Unlocked"
      },
      {
        "value": "ADD_TO_WISHLIST",
        "displayValue": "Add To Wishlist"
      },
      {
        "value": "SPENT_CREDITS",
        "displayValue": "Spent Credits"
      },
      {
        "value": "RATE",
        "displayValue": "Rate"
      },
      {
        "value": "START_TRIAL",
        "displayValue": "Start Trial"
      },
      {
        "value": "LIST_VIEW",
        "displayValue": "List View"
      },
      {
        "value": "CUSTOM_EVENT_1",
        "displayValue": "Custom Event 1"
      },
      {
        "value": "CUSTOM_EVENT_2",
        "displayValue": "Custom Event 2"
      },
      {
        "value": "CUSTOM_EVENT_3",
        "displayValue": "Custom Event 3"
      },
      {
        "value": "CUSTOM_EVENT_4",
        "displayValue": "Custom Event 4"
      },
      {
        "value": "CUSTOM_EVENT_5",
        "displayValue": "Custom Event 5"
      }
    ],
    "displayName": "Event Type",
    "name": "event_type",
    "type": "SELECT"
  },
  {
    "displayName": "User Email",
    "name": "user_email",
    "type": "TEXT"
  },
  {
    "displayName": "User Hashed Email (SHA-256)",
    "name": "user_hashed_email",
    "type": "TEXT"
  },
  {
    "displayName": "User Phone Number",
    "name": "user_phone_number",
    "type": "TEXT"
  },
  {
    "displayName": "User Hashed Phone Number (SHA-256)",
    "name": "user_hashed_phone_number",
    "type": "TEXT"
  },
  {
    "displayName": "User Mobile Ad ID",
    "name": "user_mobile_ad_id",
    "type": "TEXT"
  },
  {
    "displayName": "User Hashed Mobile Ad ID (SHA-256)",
    "name": "user_hashed_mobile_ad_id",
    "type": "TEXT"
  },
  {
    "displayName": "Price",
    "name": "price",
    "type": "TEXT"
  },
  {
    "displayName": "Item Category",
    "name": "item_category",
    "type": "TEXT"
  },
  {
    "displayName": "Item IDs",
    "name": "item_ids",
    "type": "TEXT"
  },
  {
    "displayName": "Currency",
    "name": "currency",
    "type": "TEXT"
  },
  {
    "displayName": "Number of Items",
    "name": "number_items",
    "type": "TEXT"
  },
  {
    "displayName": "Transaction ID",
    "name": "transaction_id",
    "type": "TEXT"
  },
  {
    "displayName": "Description",
    "name": "description",
    "type": "TEXT"
  },
  {
    "displayName": "Level",
    "name": "level",
    "type": "TEXT"
  },
  {
    "displayName": "Search String",
    "name": "search_string",
    "type": "TEXT"
  },
  {
    "displayName": "Sign Up Method",
    "name": "sign_up_method",
    "type": "TEXT"
  },
  {
    "notSetText": "Not Applicable",
    "macrosInSelect": true,
    "selectItems": [
      {
        "displayValue": "true",
        "value": 1
      },
      {
        "displayValue": "false",
        "value": 0
      }
    ],
    "displayName": "Success",
    "simpleValueType": true,
    "name": "success",
    "type": "SELECT",
    "help": "A variable, if provided, should evaluate to \"1\" for true and \"0\" for false"
  },
  {
    "notSetText": "Not Applicable",
    "macrosInSelect": true,
    "selectItems": [
      {
        "displayValue": "true",
        "value": 1
      },
      {
        "displayValue": "false",
        "value": 0
      }
    ],
    "displayName": "Payment Info Available",
    "simpleValueType": true,
    "name": "payment_info_available",
    "type": "SELECT",
    "help": "A variable, if provided, should evaluate to \"1\" for true and \"0\" for false"
  },
  {
    "type": "PARAM_TABLE",
    "name": "additional_init_data",
    "displayName": "Additional Initialization Data",
    "paramTableColumns": [
      {
        "param": {
          "type": "TEXT",
          "name": "key",
          "displayName": "Key",
          "simpleValueType": true
        },
        "isUnique": true
      },
      {
        "param": {
          "type": "TEXT",
          "name": "value",
          "displayName": "Value",
          "simpleValueType": true,
          "defaultValue": ""
        },
        "isUnique": false
      }
    ],
    "help": "Enter in custom initialization data"
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

var log = require('logToConsole');
var callInWindow = require('callInWindow');
var copyFromWindow = require('copyFromWindow');
var createQueue = require('createQueue');
var injectScript = require('injectScript');
var makeTableMap = require('makeTableMap');
var sendPixel = require('sendPixel');
var setInWindow = require('setInWindow');

function mergeObjects() {
    var res = {};
    for(var i = 0; i < arguments.length; ++i) {
        for(var x in arguments[i]) {
            res[x] = arguments[i][x];
        }
    }
    return res;
}

function bootstrapFn() {
  var snaptr = copyFromWindow('snaptr');
  if (snaptr) {
    return snaptr;
  }
  
  setInWindow('snaptr', function() {
    var handler = copyFromWindow('snaptr.handleRequest');
    if (handler) {
      callInWindow('snaptr.handleRequest.apply', null, arguments);
    } else {
      callInWindow('snaptr.queue.push', arguments);
    }
  });
  return copyFromWindow('snaptr');
}

function bootstrap() {
  var existingSnaptr = copyFromWindow('snaptr');
  var snaptr = bootstrapFn();
  createQueue('snaptr.queue');
  setInWindow('snaptr.sendPixelByGTM', sendPixel, true);

  data.integration = "gtm";
  log("data = ", data);
  var additionalInitData = (data.additional_init_data) ? makeTableMap(data.additional_init_data, 'key', 'value') : {};
  var initData = mergeObjects(data, additionalInitData);

  log("initData = ", initData);
  snaptr('init', initData.pixel_id, initData);
  snaptr('track', initData.pixel_id, initData.event_type, data);

  if (!existingSnaptr) {
    var url = 'https://sc-static.net/scevent.min.js';
    injectScript(url, data.gtmOnSuccess, data.gtmOnFailure, url);
  }
}

bootstrap();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://sc-static.net/*"
              },
              {
                "type": 1,
                "string": "https://tr.snapchat.com/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "snaptr"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "snaptr.handleRequest"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "snaptr.handleRequest.apply"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "snaptr.queue"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "snaptr.queue.push"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "snaptr.sendPixelByGTM"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "send_pixel",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://tr.snapchat.com/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 1/31/2019, 2:56:12 PM


